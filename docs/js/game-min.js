const Game=(()=>{"use strict";const e=document.querySelector("#btn-pedirCarta"),t=document.querySelector("#btn-detener"),r=document.querySelector("#btn-nuevoJuego"),n=document.querySelector("#btn-barajear"),a=document.querySelectorAll(".divCartas"),c=document.querySelectorAll("small"),o=["C","D","H","S"],l=["A","J","Q","K"];let s=[],d=[],u=0;const i=()=>{if(n.disabled=!0,0===d.length)throw"No hay cartas en el deck";return d.pop()},m=(e,t)=>{s[t]+=(e=>{const t=e.substring(0,e.length-1);return isNaN(t)?"A"===t?11:10:1*t})(e),c[t].innerText=s[t],h(e,t)},h=(e,t)=>{const r=document.createElement("img");r.className="carta",r.alt="carta",r.src=`cartas/${e}.png`,a[t].append(r)},f=r=>{let n;return r?(alert("Felicidades Ganaste"),n="Ganaste sacaste 21"):(alert("Perdiste inicia un nuevo juego"),n="Perdiste"),e.disabled=!0,t.disabled=!0,n},g=(r=2)=>{(()=>{d=[];for(let e=2;e<=10;e++)o.forEach(t=>{d.push(e+t)});o.forEach(e=>{l.forEach(t=>{d.push(t+e)})}),d=_.shuffle(d)})(),s=[];for(let e=0;e<r;e++)s.push(0);u=0,e.disabled=!1,t.disabled=!1,n.disabled=!1,n.innerText="Barajear",c.forEach(e=>{e.innerText=0});for(const e of document.querySelectorAll("img"))e.remove()};return e.addEventListener("click",()=>{m(i(),0),setTimeout(()=>{s[0]>21?f(!1):21===s[0]&&f(!0)},100)}),r.addEventListener("click",()=>{g()}),t.addEventListener("click",()=>{for(;s[s.length-1]<=s[0];)m(i(),s.length-1);setTimeout(()=>{s[s.length-1]>21?f(!0):f(!1)},500)}),n.addEventListener("click",()=>{d=_.shuffle(d),n.innerText=`Barajeadas:${++u}`}),{nuevoJuego:g}})();Game.nuevoJuego();